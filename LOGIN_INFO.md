# SSH 관리자 로그인 정보

## 🔐 테스트 계정

로그인 시스템이 구현되었으며, 다음 테스트 계정들을 사용할 수 있습니다:

### 관리자 계정
- **사용자명**: `admin`
- **비밀번호**: `*****`

### 일반 사용자 계정 1
- **사용자명**: `user`
- **비밀번호**: `********`

### SSH 전용 계정
- **사용자명**: `ssh`
- **비밀번호**: `*******`

## 🚀 사용 방법

1. 웹사이트 접속: `http://localhost:8000`
2. 자동으로 로그인 페이지로 리다이렉트됩니다
3. 위의 계정 정보 중 하나를 사용하여 로그인
4. 로그인 성공 시 SSH 관리 페이지로 이동

## ✨ 주요 기능

### 🔒 보안 기능
- **자체 세션 시스템**: 외부 의존성 없는 메모리 기반 세션 (24시간 유지)
- **HMAC 서명**: 세션 ID 위조 방지를 위한 서명 검증
- **비밀번호 해시화**: SHA256 해시 사용
- **자동 리다이렉트**: 로그인 후 원래 페이지로 이동
- **로그인 상태 유지**: "로그인 상태 유지" 옵션 제공
- **자동 세션 정리**: 만료된 세션 자동 정리

### 🔄 Lazy Reverse 기능
- 로그인 전 접속하려던 페이지를 기억
- 로그인 완료 후 자동으로 원래 페이지로 이동
- URL 파라미터와 쿼리 문자열 보존

### 🛡️ 접근 제어
- 모든 페이지 접근 시 자동 인증 확인
- 비로그인 사용자는 자동으로 로그인 페이지로 이동
- 공개 경로: `/login`, `/auth/*`, `/static/*`

## 🔧 실제 운영 시 주의사항

### 보안 강화
1. **환경 변수 설정**:
   ```bash
   export SECRET_KEY="your-super-secret-key-here"
   ```

2. **실제 사용자 계정 관리**:
   - `main.py`의 `USERS` 딕셔너리를 데이터베이스로 교체
   - 더 강력한 비밀번호 정책 적용
   - 2FA(2단계 인증) 추가 고려

3. **세션 보안**:
   - HTTPS 사용 (프로덕션 환경)
   - 더 짧은 세션 타임아웃 설정
   - 세션 재생성 (Session Regeneration) 구현
   - 영구 저장소 고려 (현재는 메모리 기반으로 서버 재시작 시 초기화됨)

### 자체 세션 시스템 특징
- ✅ **외부 의존성 없음**: `itsdangerous` 등의 패키지 불필요
- ✅ **Python 표준 라이브러리만 사용**: `hmac`, `hashlib`, `uuid`, `base64`
- ✅ **HMAC 서명 검증**: 세션 ID 위조 방지
- ⚠️  **메모리 기반**: 서버 재시작 시 모든 세션 초기화
- ⚠️  **단일 서버**: 로드 밸런싱 환경에서는 세션 공유 불가

## 📱 추가 API 엔드포인트

### 인증 관련 API
- `GET /auth/user`: 현재 사용자 정보 조회
- `POST /auth/login`: 로그인 처리
- `POST /auth/logout`: 로그아웃 처리

### 세션 관리 API (관리자용)
- `GET /auth/sessions`: 현재 세션 저장소 상태 조회
- `POST /auth/cleanup`: 만료된 세션 수동 정리

## 📝 로그 확인
- 로그인/로그아웃 이벤트는 `runmcp_ssh.log` 파일에 기록됩니다
- 인증 실패 시도도 로그에 기록됩니다

---

**💡 팁**: 개발 환경에서는 위의 테스트 계정을 자유롭게 사용하세요! 
